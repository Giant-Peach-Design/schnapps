<button 
    x-data="navButton" 
    x-on:click="toggle()"
    :class="btnClass()"
    class="relative z-10 transition-all duration-300 size-full text-center w-[44px] h-[44px] bg-green rounded-full"
>
  <span class="relative flex flex-col justify-between w-[18px] h-[11px] mx-auto">
    <span 
      :class="spanClass(0)"
       class="twill-change-transform ransition-all duration-300 w-full h-[1px]"></span>
    <span 
      :class="spanClass(1)"
      class="will-change-transform transition-all duration-300 w-3/4 h-[1px]"></span>
    <span 
      :class="spanClass(2)"
      class="will-change-transform transition-all duration-300 w-full h-[1px]"></span>
  </span>
</button>

<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('navButton', () => ({
      open: false,
      toggle() {
        this.open = !this.open

        if (this.open) {
          this.$dispatch('nav:toggle', true)
        } else {
          this.$dispatch('nav:toggle', false)
        }
      },
      btnClass() {
        return this.open ? 'bg-white' : 'text-black border-black'
      },
      spanClass(index) {
        if (index === 0) {
          return this.open ? 'bg-black rotate-45 origin-left !w-[82%] translate-x-[25%]' : 'bg-black'
        } else if (index === 1) {
          return this.open ? 'bg-black rotate-0 origin-left scale-x-0 opacity-0' : 'bg-black'
        } else if (index === 2) {
          return this.open ? 'bg-black -rotate-45 origin-left !w-[82%] translate-x-[25%]' : 'bg-black'
        }
      }
    }))
  }
  )
</script>